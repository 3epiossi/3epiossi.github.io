---
title: 遠程通信系統和協定
author: NastYboY
date: 2025-06-14
category: IOT
layout: post
mermaid: true
cover: /assets/images/IOT/wifi.webp
---

# 蜂窩連接
* 1947年Douglas H. Ring和Rae Young提出了蜂窩概念，並由Richard H. Frenkiel、Joel S. Engel和Philip T. Porte在20世紀60年代進行實驗，實現了更廣泛、更強勁的移動部署。
* Amos E. Joel Jr.在貝爾實驗室設想並實現了蜂窩之間的切換實驗。這些技術共同形成了第一個移動電話系統，第一部移動電話於1979年由摩托羅拉的馬丁·庫珀撥打。
* 蜂窩理論的最佳模型是六邊形區域，可確保頻率與最近鄰居頻率的分離，從而實現頻率復用。
* 1979年，日本NTT公司首次進行商業部署，並獲得大眾接受。
  * 隨後，丹麥、芬蘭、挪威和瑞典於1981年陸續部署。
  * 美洲則遲至1983年才建立蜂窩移動系統。
  * 這些技術最初稱為1G或第一代蜂窩技術。
* 管理模式和標準
  * 國際電信聯盟（ITU）：
    * 成立於1865年，1932年成為聯合國專門機構。
    * 它在全球無線通信標準、導航、移動、網際網路、數據、語音和下一代網路中扮演重要角色，擁有193個成員國和700個公營和私營機構。
    * 其無線電通信部門（ITU-R）負責制定歷代無線電和蜂窩通信的國際標準和目標，包括數據可靠性和低數據速率要求。
      * 在過去十年中，ITU-R制定了兩個基本規範：
        * IMT-2000：指定3G終端市場要求。
        * IMT-Advanced：最近提出的要求規範，基於全IP移動寬帶無線系統，在全球範圍內定義了4G。
    * ITU於2010年10月批准了3GPP路線圖中的LTE技術以支持4G蜂窩通信目標。ITU-R也持續推進5G的發展。
    * IMT-Advanced 4G蜂窩通信系統要求包括：
      * 必須是全IP、數據包交換網路，可與現有無線網路互操作
      * 客戶端移動時標稱數據速率為100 Mbit/s，固定時為1 Gbit/s
      * 可動態共享和使用網路資源
      * 5～20 MHz的可擴展信道帶寬
      * 無縫連接和跨多個網路的全球漫遊
    * 然而，ITU的目標常未實現，並存在命名和品牌混淆。
  * 第三代合作夥伴計畫（3GPP）：
    * 另一個移動通信領域的標準機構，由來自全球各地的七個電信組織組成。
    * 成立於1998年，負責管理和監管移動通信技術。
    * 它在2000年發布了第一個標準。
    * 3GPP的總體目標是在創建蜂窩通信的3G規範時，認可全球移動通信系統（GSM）的標準和規範。
    * 其工作由三個技術規範組（TSG）和六個工作組（WG）執行。
      * 主要目標是盡可能實現系統的向後和向前兼容性。
  * ITU、3GPP和LTE定義的關係：
    * ITU在全球範圍內定義4G或5G設備的目標和標準，而3GPP通過一系列LTE改進技術來實現這些目標，ITU認可這些LTE技術的進步符合其4G或5G設備的要求。
    * LTE（Long-Term Evolution）是實現ITU-R速度和要求的途徑。
      * 早期許多營運商宣傳的4G LTE連接，雖然比傳統3G網路有了實質性改進，但可能並未完全符合ITU-R 4G規範。
      * LTE-Advanced是更接近ITU-R目標的演進技術。因此，術語可能產生誤導和混淆，架構師需要深入理解技術。
* 蜂窩接入技術
  * 在3GPP支持LTE之前，蜂窩技術有多種標準，尤其是GSM和CDMA設備，這些技術在基礎設施到設備層面彼此不兼容。
  * 頻分多址（FDMA）：
    * 在類比系統中常見，如今在數位領域很少使用。
    * 將頻譜劃分為若干頻帶並分配給用戶，在任意指定時間為一個收發器分配一個信道，直到呼叫結束或切換到另一個信道，該信道對其他通話都是關閉的。
    * 全雙工FDMA傳輸需要兩個信道。
  * 碼分多址（CDMA）：
    * 基於擴頻技術，通過允許所有用戶同時占用所有信道來提高頻譜容量。
    * 每個語音或數據呼叫都被分配了唯一的代碼。
    * CDMA允許軟切換，終端可以同時與多個基站通信。
  * 時分多址（TDMA）：
    * 通過將每個頻率分為不同時隙來增加頻譜容量。
    * TDMA允許每個用戶在呼叫的短時間內訪問整個無線頻率信道，其他用戶在不同時隙共享同一頻率信道。
    * TDMA是第二代移動蜂窩網路的主導技術，GSM組織採用TDMA。
    * GSM分為歐洲和亞洲的900 MHz/1800 MHz以及北美和南美的850 MHz/1900 MHz頻段。
  * GSM和CDMA互不兼容，某些設備和調製解調器可能只支持GSM/LTE或CDMA/LTE。
    * 然而，如果同時支持LTE頻段，它們可以兼容。
    * 舊設備中，語音在2G或3G頻段傳送，數據在4G頻段傳送，彼此不兼容。
* 3GPP用戶設備類別
  * 3GPP在版本8中有五種用戶設備類別，每種都有不同的數據速率和MIMO架構。
  * 版本8後又增加了更多設備類別，包含上行和下行鏈路功能。
  * 蜂窩無線電或芯片組通常會標註其支持的類別，且蜂窩系統（eNodeB）也必須支持該類別。
  * 小區設備與基礎設施之間的關聯過程涉及能力信息的交換。
  * 版本13中的Cat M1和Cat NB1將數據速率顯著降低到1Mbit/s或更低，專為需要低數據速率且僅在短時間內通信的物聯網設備設計。
* 4G LTE頻譜分配和頻段
  * 現有LTE頻段有55個，部分原因歸因於頻譜分片和市場策略以及政府的頻段分配和拍賣。
  * LTE分為兩種互不兼容的類別：
    * 時分雙工（TDD）：使用單一頻率空間傳輸上行和下行鏈路數據，傳輸方向通過時隙控制。
    * 頻分雙工（FDD）：基站（eNodeB）和用戶設備（UE）為上、下行鏈路數據打開一對頻率空間，數據可以同時發送。
  * TDD/FDD組合模組將兩種技術結合到一個調製解調器中，允許多載波使用。
  * FDD為上行和下行數據分配一對專用頻率，而TDD對上行鏈路和下行鏈路使用相同的載波頻率，基於固定的幀結構。
  * 4G LTE中，每幀總時間為10ms，包含10個子幀，每個子幀包括兩個時隙。
    * FDD每個幀包含20個時隙（0.5ms）。
    * TDD中，子幀是兩個半幀，還使用特殊子幀（SS）將子幀劃分為上行和下行部分。
  * LTE的一些專用術語包括：
    * 資源元素（Resource Element, RE）：LTE中最小的傳輸單元，由一個子載波組成，占用一個符號時間單位。
    * 子載波間隔：LTE使用15kHz間隔，沒有保護間隔。
    * 循環前綴：用於防止子載波之間的多徑符號間干擾。
    * 時隙：LTE幀結構中的時隙長度為0.5 ms，每個時隙的OFDM符號數為6或7個。
    * 資源塊（Resource Block, RB）：一個傳輸單元，包含12個子載波和7個符號，相當於84個資源元素。
  * LTE幀長度為10 ms，由10個子幀組成。
  * 分配給4G LTE的頻段特定於地區法規。
    * 在歐洲，典型頻段為800 MHz、1452～1492 MHz、1800 MHz、2300 MHz、2600 MHz。
  * LTE-U（LTE-Unlicensed）：
    * 與Wi-Fi設備共存於5 GHz頻段，LTE的控制信道不變，語音和數據遷移到5 GHz頻帶。
    * 用戶設備只能支持無授權頻段中的單向或全雙工下行鏈路。
  * LAA（Licensed Assisted Access）：類似於LTE-U，但由3GPP管理和設計，使用偵聽前發送（LBT）的競爭協議協助與Wi-Fi共存。
  * LTE使用載波聚合來提高可用比特率。
  * 營運商從3GPP版本8和9開始將載波聚合用於FDD和TDD部署。
  * 它嘗試同時使用多個波段，最多可使用五個信道，組合最大容量為100 MHz。
  * 在FDD模式下，上行鏈路和下行鏈路信道可能不對稱且使用不同的容量。 載波聚合有三種方式：
    * 帶內連續載波聚合：所有頻率聚集在同一頻段上，沒有間隔。
    * 帶內非連續載波聚合：兩個或多個載波置於同一頻段，但頻率之間可能存在間隔。
    * 帶間非連續載波聚合：頻率分布在不同的頻段上，以不同的方式組合在一起，最常見的形式。
* 4G LTE拓撲和架構
  * 3GPP LTE架構稱為系統架構演進（SAE），目標是提供基於全IP流量的簡化架構，並支持無線接入網路（RAN）上的高速通信和低時延。
  * LTE在3GPP路線圖的版本8中引入。
    * 網路完全由IP數據包交換組件組成，語音數據也作為數字化的IP數據包發送，這是與傳統3G網路的根本區別。
    * 傳統3G拓撲使用電路交換處理語音和短信，分組交換用於數據。
  * 典型的4G LTE網路有三個組成部分：
    * 客戶端（UE）：用戶的無線電設備，
      * 由執行所有通信功能的移動終端（MT）
      * 管理終端數據流的終端設備（TE）
      * 作為身份管理SIM卡的通用集成電路卡（UICC）組成
    * 無線電網路（E-UTRAN）：
      * 到LTE UE設備的4G LTE空中接口。
      * E-UTRAN將OFDMA用於下行鏈路，SC-FDMA用於上行鏈路，使其與傳統3G W-CDMA技術不兼容。
      * E-UTRAN由多個eNodeB組成，彼此通過X2接口互聯。
      * eNodeB：無線電網路的核心，處理UE與核心網路（EPC）之間的通信。
        * 每個eNodeB是一個基站，控制一個或多個蜂窩小區中的eUE，並將1ms的資源塊（稱為無線電幀）分配給特定客戶端。
        * 它根據使用條件將信道資源分配給附近的不同UE，負責觸發從空閒（IDLE）到連接（CONNECTED）狀態的轉換，以及處理UE的移動性（如切換）和傳輸擁塞控制。
        * eNodeB和EPC之間的接口是S1接口。
    * 核心網路（EPC）：
      * 代表營運商的管理和控制接口，可以管理一個或多個無線電網路。
      * 在LTE設計中，3GPP定義了一個扁平架構，將用戶數據（用戶面）和控制數據（控制面）分開，以更有效地擴展。
      * EPC有五個基本組成部分：
        * 移動性管理實體（MME）：負責控制面流量、身份驗證和安全性、定位和跟踪以及移動性問題處理。
          * MME還需識別IDLE模式下的移動性，使用跟踪區域（TA）代碼進行管理。MME還控制非接入層（NAS）信令和承載控制。
        * 歸屬用戶服務器（HSS）：與MME關聯的中央數據庫，包含網路營運商的用戶信息，如密鑰、用戶數據、最大計畫數據速率、訂閱信息等，從3G UMTS和GSM網路保留下來。
        * 服務網關（SGW）：負責處理用戶面和用戶數據，在eNodeB和PGW之間充當路由器轉發數據包。
          * SGW外的接口稱為S5/S8接口，S5用於同一網路設備，S8用於不同網路設備。
        * 分組數據網路網關（PGW）：將移動網路連接到網際網路或其他PDN網路等外部資源，並為連接的移動設備分配IP地址。
          * PGW管理各種網際網路服務的服務質量（QoS），使用SGi接口訪問外部服務。
        * 策略和計費規則功能（PCRF）：另一個存儲策略和決策規則的數據庫，同時控制基於流量的計費控制功能。
        * 分組數據網路（PDN）：大多情況下是網際網路的外部接口，也可以作為其他服務（如數據中心、私有服務）的外部接口。
  * 在4G LTE服務中，用戶會擁有一個公共陸地移動網路（PLMN）拜訪地PLMN。
    * 客戶端UE設備連接到拜訪地PLMN需要新網路上E-UTRAN、MME、SGW和PGW的資源。
    * PGW准許通過漫遊地路由（local-breakout）接入網際網路。此時開始進行漫遊計費。
  * **非接入層（NAS）**信令是在UE和核心節點之間傳遞消息的機制，如認證消息、更新或附加消息。
    * NAS位於SAE協議棧的頂部。
  * **GPRS隧道協議（GTP）**是LTE中基於IP/UDP的協議，用於控制數據、用戶數據和計費數據。
    * GTP-U表示用戶面數據
    * GTP-C處理控制面數據
  * LTE架構和協議棧使用承載（Bearer）默認承載，提供盡力而為的服務。
  * 專用承載可用於QoS和良好的用戶體驗，當默認承載不能滿足服務要求時啟動，且始終位於默認承載之上。
  * 3GPP和營運商的目標之一是提供一個標準的、公認的**IP語音（VoIP）解決方案。3GPP選擇VoLTE（Voice over Long-Term Evolution）**作為架構，使用會話發起協議（SIP）的擴展變體處理語音和文本消息，並使用自適應多速率（AMR）方案提供寬帶高質量語音和視頻通信。
  * 移動寬帶的兩個標準是LTE和WiMAX。
    * WiMAX基於IEEE 802.16標準，由WiMAX論壇管理。
    * WiMAX頻段範圍為2.3～3.5 GHz，也可使用2.1～2.5 GHz頻段。
    * WiMAX在LTE推廣前已商業化，但LTE通常更靈活且被廣泛採用。
* 4G LTE E-UTRAN協議棧
  * 4G LTE協議棧與OSI模型相似，但控制面具有其他特性，如無線電資源控制（RRC）控制面。
  * 控制面有兩種狀態：空閒（IDLE）和連接（CONNECTED）。
    * 用戶面時延通常為4.9 ms，控制面時延為50 ms。
  * 協議棧由以下功能層組成：
    * 物理層（PHY）：無線電接口
      * 負責鏈路適配（AMC）
      * 功率管理
      * 信號調製（OFDM）
      * 數位信號處理
      * 小區信號搜索
      * 小區同步
      * 切換控制
      * RRC層的小區測量
    * 媒體接入控制層（MAC）：執行邏輯通道和傳輸層之間的映射，將分組復用到物理層的傳輸塊（TB）上
      * 其他職責包括調度報告、糾錯、信道優先級和管理多個UE。
    * 無線鏈路控制層（RLC）：傳輸上層PDU
      * 通過ARQ進行糾錯
      * 處理數據包的連接/分段
      * 提供邏輯信道接口
      * 檢測重複數據包並重組
    * 分組數據匯聚協議層（PDCP）：負責數據壓縮和解壓縮
      * 管理用戶面數據和控制面數據的路由
      * 完成重複SDU的管理功能（如切換）
      * 還包括加密、解密、完整性保護、基於定時器的数据丟棄和信道重建。
    * 無線電資源控制層（RRC）：向非接入層和接入層廣播系統信息
      * 管理安全密鑰
      * 配置和無線電承載控制
    * 非接入層（NAS）：控制面的最高層，UE和MME之間的主要接口，主要作用是會話管理和UE移動性建立。
    * 接入層（AS）：NAS下的一層，目的是在UE和無線網路之間傳輸非無線電信號。
* 4G LTE地理區域、數據流和切換過程
  * LTE網路中有三種類型的地理區域：
    * 跟踪區域（Tracking Area, TA）：UE可以在不改變服務MME的情況下移動的區域。
    * 服務區域（Service Area, SA）：一個或多個SGW可持續為UE提供服務的區域。
    * 位置區域（Location Area, LA）：由不重疊的小MME和SGW區域組成的子區域，用於跟踪處於待機模式的UE位置，對切換至關重要。
  * 為了保證正常的網路服務，每個4G LTE網路都必須是唯一可識別的，使用網路ID，包括：
    * 移動國家碼（MCC）：網路所在國家/地區的三位數標識。
    * 移動網路碼（MNC）：營運商的兩位或三位數字值。 每個營運商還需要對每個MME進行唯一標識。每個MME有三個身份：
    * MME組識別碼（MMEGI）：標識屬於同一池區域的所有MME。
    * MME識別碼（MMEI）：定義MME組或群。
    * 全球唯一MME識別碼（GUMMEI）：PLNM-ID和MMEI的組合，可識別全球任何網路的任何位置。
      * 跟踪區域身份（TAI）E-UTRAM小區身份（ECI）
      * **E-UTRAN小區全球識別碼（ECGI）**
      * 物理小區標識（0～503的整數值）
  * **切換（Handover）**過程是指將呼叫或數據會話從蜂窩網路中的一個信道轉移到另一個信道。
  * LTE系統內切換：在同一網路內，兩個eNodeB通過X2接口通信，核心網路EPC不參與。
    * 如果X2不可用，則由EPC通過S1接口管理。
  * 營運商間切換：在漫遊時，也可以在營運商之間進行切換。
  * 無線電接入技術（RAT）間切換：切換至其他網路，如蜂窩信號和Wi-Fi信號之間移動。
  * 切換過程允許無縫切換。
    * 源eNodeB根據容量或客戶端移動決定發起切換請求，通過向UE廣播測量報告來創建切換請求。
    * X2傳輸承載通過直接隧道設置（DTS）在源eNodeB和目標eNodeB之間通信。
    * 目標eNodeB準備資源，源eNodeB分離客戶端UE，直接數據包轉發確保數據不丟失。
  * 許多採用4G LTE技術的物聯網網關設備允許在單個設備網關或路由器上運行多個營運商，可實現營運商之間無縫切換和轉換而不丟失數據。
    * 這對於基於移動和運輸的物聯網系統（如物流、應急車輛和資產跟踪）很重要。
* Cat-0、Cat-1、Cat-M1和NB-IoT
  * 物聯網部署中，數據量可能很少且發生時間很短，大部分數據由設備生成並在上行鏈路傳輸。
    * 低功耗廣域網路（LPWAN）是針對物聯網部署的解決方案。
    * 所有這些協議都與現有的蜂窩硬件基礎設施兼容，但需要更新協議軟體。
  * LTE Cat-0：在版本12中推出，是Cat-1之外第一個針對物聯網需求的架構。
    * 基於IP並在許可頻段內運行。上行和下行鏈路峰值數據速率均為1 Mbit/s，遠低於Cat-1。
    * 降低數據速率簡化了設計並降低了成本。從全雙工到半雙工架構的轉變進一步改善了成本和功耗。
    * Cat-0引入了節電模式（PSM），允許調製解調器隨時進入深度休眠狀態，通過定期執行跟踪區域更新（TAU）保持可到達狀態，最長允許休眠12.1天。
    * Cat-0的覆蓋率和普及率低，大多數新功能已包含在Cat-1和其他協議中。
  * LTE Cat 1：在M2M行業具有顯著市場吸引力。
    * 版本8的一部分，後來更新以支持節電模式和Cat-0的單一天線。
    * 中速LTE標準，下行鏈路10 Mbit/s，上行鏈路5 Mbit/s。能傳輸語音和視頻流以及M2M和IoT數據。
    * 採用Cat-0 PSM和天線設計，功耗比傳統4G LTE低，降低了無線電設備和電子產品的設計成本。
    * 是目前覆蓋範圍最廣、功耗最低的物聯網和M2M設備的最佳選擇。無線電設備可回落至2G和3G網路。
  * LTE Cat-M1（eMTC）：也稱為增強型機器類型通信，在3GPP版本13計畫表中發布，是Cat-0架構的優化版本。
    * 專為低成本、低功耗和範圍增強的物聯網和M2M用例設計。
    * 信道帶寬從20 MHz降低到1.4 MHz，降低了成本和功耗。
    * 發射功率從23 dB降低到20 dB，進一步降低成本，但覆蓋強度提升了+20 dB。
    * 基於IP，非MIMO架構，吞吐量分別能達到375 Kbit/s或1 Mbit/s。支持VoLTE，提供移動解決方案，使用傳統的SC-FDMA算法、跳頻和turbo編碼。
    * 省電功能：蜂窩信號塔會重播數據包6～8次，確保信號接收
      * 無線網一旦收到無誤數據包便可關閉接收。
      * 擴展不連續接收（eDRX）模式允許在尋呼周期之間有10.24秒的睡眠時間，可深度睡眠長達40分鐘，空閒電流低至15 µA。
      * 其他功能包括：
        * 放寬鄰近小區的測量和報告週期
        * 用戶面和控制面CIoT EPS優化（保存RRC上下文）
        * TCP或UDP數據包的頭壓縮
        * 減少長時間休眠後的同步時間
    * Cat-M1能比Cat-NB更快地傳輸數據，並更快進入深度睡眠狀態。
  * LTE Cat-NB（NB-IoT、NB1）：由3GPP在版本13中管理的另一種LPWAN協議。
    * 在許可頻段內運行，目標是節省電力（10年電池壽命）、擴展覆蓋範圍（+20 dB）並降低成本（每個模組5美元）。
    * 基於EPS和優化的CIoT。信道帶寬進一步減小到180 kHz（比Cat-M1窄），進一步降低成本和功耗。
    * 顯著差異：沒有承載語音或視頻流量的能力
      * 不支持切換，必須與單個小區保持關聯或保持靜止
    * 使用OFDMA（下行）和SC-FDMA（上行）復用，使用相同的子載波間隔和符號持續時間。
      * E-UTRAN協議棧與典型的RLC、RRC和MAC層相同，仍基於IP。
    * 部署靈活性：由於信道帶寬小（180 kHz），可將Cat-NB信號隱藏在更大的LTE信道中，替換GSM信道，甚至存在於常規LTE信號的保護信道中。
      * GSM選項最簡單、上市最快。
      * 每個小區最多可部署200,000個設備。
    * 深度覆蓋：由於最大耦合損耗（MCL）為164 dB，可在地下室、隧道、農村地區和開放環境中進行深度覆蓋。
      * 與標準LTE相比，覆蓋增益為20 dB，覆蓋範圍是原來的7倍。
    * 數據速率與功耗：數據速率是覆蓋的函數，影響功耗（幾乎線性）和時延。更高的數據速率意味著更高的功率但更低的時延。
      * 電源管理與Cat-M1非常相似，適用於所有電源管理技術。
* Multefire、CBRS和蜂窩網路頻譜共享
  * 公民寬帶無線服務（CBRS）：3.5 GHz頻段中的150 MHz帶寬，FCC將此頻段分配給政府雷達系統以及未授權的無線營運商。
  * Multefire：建立在3GPP標準基礎上，但在5 GHz未授權頻譜頻段運行。Multefire基於LAA標準。
  * 可用頻段：涵蓋了800 MHz、900 MHz、1.9 GHz、2.4 GHz、3.5 GHz和5 GHz等頻段。
    * Multefire和4G LTE的技術差異在於Multefire消除了對錨點的要求，使其本質上可以與營運商無關。
    * 它使用偵聽前發送（LBT）協議，類似802.11協議，需要在發送前清除信道。
    * Multefire也使用信道聚合方法以提高公平性。
    * Multefire在許多用例中可以比蜂窩網或Wi-Fi更有效地服務，例如在港口等大面積區域的資產跟踪。

# 5G
* 5G（或新無線電的5G-NR）是下一代基於IP的通信標準，旨在取代4G LTE，但採用了4G LTE的某些技術並存在實質性差異和新功能。
* 5G有望為物聯網、商業、移動和車輛使用情況提供實質性能力，並改善帶寬、時延、密度和用戶使用成本。
  * 5G試圖為所有用例提供一個統一的標準，而不是為每個用例建立不同的蜂窩服務和類別。
* 目標：融合光纖和蜂窩基礎設施、使用小電池的超快手機、降低移動設備的成本壁壘。
* 演進：ITU-R批准國際規範，3GPP遵循標準。
  * 3GPP使用**非獨立組網（NSA）**概念促進5G發展，重用LTE核心基礎設施
  * **獨立組網（SA）**將完全依賴5G下一代核心基礎設施
* 能力：1～10 Gbit/s的終端連接速率
  * 全球100%覆蓋率
  * 4G LTE上設備連接數量10～100倍
  * 500 km/h的連接速度
  * <1 ms端到端往返時延
  * 99.999%可用性
  * 每單位面積1000倍帶寬（約100萬節點/km2）
  * 終端物聯網節點電池壽命長達10年
  * 減少90%網路能耗
* 部署類型：
  * 傳統移動無線網：使用2 GHz以下頻譜，用於覆蓋範圍、移動性和功耗，依賴宏蜂窩和當前LTE兼容性，能穿透雨、霧和障礙物，峰值帶寬難以達到100 MHz。
  * 固定無線：使用6 GHz以上頻率，依賴新的小型蜂窩基礎結構，用於低移動性或固定地理區域，覆蓋範圍和穿透能力受限，但帶寬可達400 MHz。
* 5G頻率分布：5G可能使用多種頻率。主要考慮在未授權的24～100 GHz頻段範圍內使用毫米波（mmWave），可提供支持多Gbit/s速度的技術。
* 毫米波挑戰：自由空間路徑損耗、衰減和穿透。
  * 信號在60 GHz時會被大氣中的氧氣吸收，植被和人體本身也會對信號產生嚴重影響。
  * 毫米波信號穿透水泥牆損耗15dB，玻璃窗損耗40dB。
    * 因此，宏蜂窩進行室內覆蓋幾乎不可能，需通過室內微蜂窩緩解。
* 大規模MIMO（M-MIMO）：可減輕路徑損耗的影響，將256～1024根天線組成宏蜂窩塔，波束賦形也將被使用。
  * MIMO允許更高密度的UE設備，並通過同時在更多頻率上接收和發送來增加帶寬。
* 雙連接（Dual Connectivity）：UE可同時使用多個頻段，例如使用較低頻率進行遠程通信，切換到毫米波進行室內和個人通信。
* 控制面與用戶面分離：用戶面數據可以使用30 GHz頻率連接到附近的微小區，而控制面數據可被典型的4 GHz速率連接到遠距離eNodeB宏蜂窩塔上。
* 速度提升：通過提高頻譜效率，如15 kHz子載波間隔和靈活可擴展的符號數字學。
* 新波形：針對物聯網和mMTC小數據包，考慮新的波形如濾波器組多載波（FBMC）、廣義頻分多路複用（GFDM）和非正交多址接入（NOMA）。
* 降低時延：目標是將時延控制在1 ms以下（4G為15 ms），通過使用微蜂窩調度數據以及**設備到設備（D2D）**通信實現。
* 5G RAN架構：從4G標準演變而來。
  * 接口：傳統CPRI光纖接口（供應商專有，2.5Gbit/s），增強型CPRI或e-CPRI（開放標準5G替代接口，基於IP或以太網，允許功能分離）。
    * CPRI難以適應5G MIMO的容量和需求。
  * 功能分割：在無線電單元（RU）和分佈式單元（DU）之間引入功能分割，靈活確定功能駐留位置，以管理帶寬和時延。
  * 多接入邊緣計算（MEC）：中間層允許應用程序通過虛擬化接口共存於通用邊緣硬件，使雲計算更接近邊緣用戶和終端用戶。
* 5G核心網架構（5GC）：基於不同網路功能的服务架构。
  * 功能組件包括認證憑證儲存庫和處理功能（ARPF）
  * 認證服務器功能（AUSF）
  * 安全錨功能（SEAF）
  * 接入和移動性管理功能（AMF）
  * 策略控制功能（PCF）
  * 會話管理功能（SMF）
  * 用戶平面功能（UPF）
  * 網路暴露功能（NEF）
  * 數據網路（DN）
* **用戶平面功能（UPF）**是5G和4G LTE之間的根本區別，旨在將分組網關控制與數據的用戶面解耦，借鑒了SDN架構。
* 5G安全和註冊：通過統一認證提高安全性（5G-AKA）。
  * 該技術使認證與接入點分離，允許可擴展的認證算法、可調整的安全策略以及使用用戶永久識別碼（SUPI）。
* 超可靠低時延通信（URLLC）：5G的三個應用之一，為遠程手術、無人機或公共安全系統等高價值和至關重要的情景量身定制。
  * 通過修改物理調度程序和信道編碼器，使URLCC流量優先於所有其他形式流量。
  * 通過低時延HARQ（混合自動重傳請求）解決重傳影響時延的問題。
* 細粒度時分雙工（TDD）和低時延HARQ：5G允許載波信號的時隙重組，實現時延的10倍改進。
  * HARQ設計允許在整個數據序列和數據流中隨時插入URLCC流量。
  * 傳輸時間間隔（TTI）不再固定，可縮短以實現低時延和高可靠性通信，或延長以獲得更高的頻譜效率。
* 網路切片：涉及軟體定義網路（SDN）和網路功能虛擬化（NFV）的使用。
  * SDN將管理網路路由的控制面與處理信息轉發的數據面分離。
  * NFV將網路應用程序虛擬化。
  * 網路切片在現有物理基礎設施上創建虛擬子網，提供端到端定制網路，可控制和自適應的服務質量和配置方法，以及針對特定流量類型的動態負載調整。
* 5G能量注意事項：5G會消耗客戶端設備和服務器基礎設施（如eNodeB）上的能量。
* 小型蜂窩系統：小型蜂窩將以比傳統蜂窩系統更低的功率工作，但其龐大數量將提高能量密度。
* MIMO/OFDM：OFDM的峰均功率比（PAPR）較高。
  * PAPR是指OFDM符號的最大功率與平均功率之比。
  * PAPR會導致功率放大器需要降低其工作功率以補償MIMO的峰值功率突發，這可能顯著降低物聯網設備的電池壽命。
  * PAPR緩解技術：削波（Clipping）
    * 選擇性映射（SLM）
    * 部分傳輸序列（PTS）
    * 非正交多址接入（NOMA）

# LoRa和LoRaWAN
* LoRa是一種長距離和低功耗物聯網協議的物理層，而LoRaWAN代表MAC層。
  * 它們是專有的LPWAN技術，使用未授權頻譜。
  * LoRa/LoRaWAN可由任何人構建、定制和管理，無需營運商或服務等級協議。
  * 與傳統3G或LTE連接相比，LoRaWAN在大批量部署時數據速率會低很多。
  * LoRa聯盟於2015年成立，是LoRaWAN規範和技術的標準機構。
  * 成本優勢：單個LoRaWAN網關能覆蓋大量區域（市區2～5公里，郊區15公里），基礎設施成本較低。
* LoRa物理層：管理調製、功耗、接收器和傳輸無線電以及信號調節。
  * 基於ISM免許可空間的頻段包括：915 MHz（美國）、868 MHz（歐洲）和433 MHz（亞洲）。
  * 調製技術：線性調頻擴頻（CSS）的衍生物。
    * CSS在固定信道帶寬內平衡了數據速率和靈敏度，對干擾、多普勒效應和多徑有特別的抵禦能力。
    * 它允許在長距離上使用低功耗，並可以在同一頻率上以不同的數據速率發送多個傳輸。
  * 擴頻因子（SF）：擴頻因子越高，傳輸速度越慢，但傳輸範圍越長。
    * LoRa有6種不同的擴頻因子（SF=7到SF=12）。
  * 自適應數據速率（ADR）：根據節點和基礎設施的密度動態擴展容量，由雲端的網路管理控制。
    * 靠近基站的節點可設定為較高數據速率，遠處的節點傳輸速率較慢。
* LoRaWAN MAC層：是一個開放協議。有三種MAC協議平衡了時延和能量使用：
  * A類設備：最節能，時延最高。基於電池的感測器和終端。
    * 設備發送數據包後進入休眠，直到接收延遲計時器到期才喚醒並打開接收時隙。
    * 所有下行通信發生在設備發送數據包上行後的短時間內。
  * B類設備：平衡功耗和時延。
    * 依賴網關定期發送的信標來同步網路中的所有終端，並廣播到網路。
    * 設備接收信標後創建一個ping時隙，允許發送和接收消息。
  * C類終端：功耗最大，時延最短。
    * 打開兩個A類接收窗口以及一個連續供電的接收窗口。
    * 通常是通電的執行器或插入式設備，下行傳輸沒有時延。
* 安全性：使用AES128模型安全加密數據，將身份驗證（NwkSKey）和加密（AppSKey）分開。
* 加入網路：可通過空中啟用（OTAA），設備發送JOIN請求
  * 網關響應設備地址和身份驗證令牌，應用程序和網路會話密鑰在此過程中派生。
  * 也可通過個性化啟用（ABP），營運商預先分配32位網路和會話密鑰。
* 協議類型：異步的、基於ALOHA的協議。
  * ALOHA中，客戶端可以在不知道其他客戶端是否同時傳輸消息的情況下傳輸。
  * 沒有保留或多路復用技術。
* LoRaWAN拓撲結構：基於星形網路拓撲結構，LoRa通信基於廣播而不是點對點關係。
  * 可使用多個網關來提高組網能力和範圍。
  * 雲提供商負責管理和處理重複廣播。
* 數據流：用戶數據通過LoRaWAN協議從終端節點傳輸到網關。
  * LoRaWAN網關通過任何回傳（如4G LTE、以太網或Wi-Fi）將數據包轉發到雲端的專用LoRaWAN網路服務。
  * 這很獨特，因為大多數其他WAN架構在客戶數據離開其網路到網際網路目的地時，會釋放對客戶數據的控制。
* 網路服務職責：重複數據包識別和終止安全服務
  * 下行鏈路路由
  * 確認消息
* LPWAN系統的基站數可減少到傳統蜂窩網路的1/10～1/5，以實現類似覆蓋範圍。
  * 所有基站在監聽同一個頻率組，邏輯上是一個非常大的基站。
* LoRaWAN總結：是一種非常節能的設備，最適合使用電池的物聯網應用。
  * 其傳輸距離和滲透率使其非常適合智能城市。
  * 限制：數據率較低、有效載荷有限，占空比調節可能無法滿足需要實時通信的應用。
  * 架構和協議差距：缺乏OSI模型中常見的網路層、會話層和傳輸層功能（漫遊、分包、重試機制、QoS和斷開）。
    * 依賴於基於雲的網路接口，需要雲訂閱。
    * Semtech是該技術的唯一芯片供應商。
    * ALOHA協議使驗證和確認複雜化，導致誤碼率超過50%。
    * 下行鏈路能力有限，高時延，無實時能力。OTA固件更新非常慢。
    * 移動性和移動節點的管理具有挑戰性。地理定位精度約100米。

# Sigfox
* Sigfox是2009年在法國開發的窄帶LPWAN協議（類似NB-IoT），是另一種使用未授權ISM波段的專有協議。
* 顯著特性和限制：
  * 每台設備每天在上行鏈路上最多發送140條信息（占空比1%，6條信息/小時）。
  * 每條信息的有效載荷大小為12字節（上行）和8字節（下行）。
  * 上行鏈路吞吐量高達100 bit/s，下行鏈路吞吐量高達600 bit/s。
  * 最初是單向的，後來下行信道也可使用。
  * 是專利封閉技術，硬件開放但網路不是，需要訂購。
* Sigfox構建並營運其網路基礎設施，類似LTE營運商的安排。
  * 計費基於連接到客戶網路的設備數量、每個設備的流量概況以及合同期限。
* 目的：用於發送小型和不頻繁數據突發的系統，如報警系統、簡單功率計和環境感測器。
* Sigfox物理層：稱為超窄帶（UNB）。傳輸使用非常狹窄的信道。
  * 頻段：868 MHz（歐洲）和902 MHz（北美）。日本等地區因嚴格的頻譜密度限制難以部署。
  * 調製：上行頻帶寬度為100 Hz，使用正交序列擴頻（OSSS）
    * 下行頻帶寬度為600 Hz，使用高斯頻移鍵控（GFSK）。
* 傳輸方式：Sigfox將在隨機信道上以隨機的時間延遲（500～525毫秒）發送一個短數據包，這種編碼稱為隨機頻率和時分多址（RFTDMA）。
* 雙向通信：沒有被動接收模式，接收窗口只在上行傳輸完成20秒後打開，並保持25秒，允許接收短消息（4字節）。
  * 使用333個信道（每個100 Hz），其中3個信道使用偽隨機方法支持跳頻。接收機靈敏度為-120 dBm / -142 dBm。
* Sigfox MAC層：每個設備都有唯一的Sigfox ID，用於消息路由和簽名。
  * 「即發即棄」（fire and forget）模型：接收者不會對消息進行確認，相反，一個消息被節點在三個不同的時間以三個不同的頻率發送三次，確保信息傳遞的完整性。
  * 幀結構：包含預定義的前導碼、幀同步字段和錯誤檢測的幀校驗序列（FCS）。沒有數據包包含目的地址或其他節點，所有數據由各個網關發送到Sigfox雲服務。
  * 根據歐洲法規的占空比限制，計算出每小時最多發送6條信息。
* Sigfox協議棧：與OSI模型相似，有三層：
  * PHY層：合成和調製無線電信號的方式。
  * MAC層：增加設備識別/認證（HMAC）和糾錯碼（CRC）的字段，不提供任何信令。
  * 幀層：從應用程序數據生成無線電幀，附加序列號。
* 安全性：協議棧中沒有對消息進行加密，客戶可自行為有效載荷數據提供加密方案。
  * 每條消息都會用設備獨有的密鑰進行簽名以便識別。
* Sigfox拓撲結構：一個Sigfox網路的密度可達每個基站100萬個節點。
  * 所有連接到基站的節點形成一個星形網路。
  * 所有數據都通過Sigfox後端網路管理，來自Sigfox基站的所有消息必須通過IP連接到達後端服務器。
    * 後端是數據包的唯一目的地。
    * 後端負責：認證客戶端
      * 確認無重複
      * 存儲並發送消息
      * 如果需要將數據傳輸到終端節點，後端服務器會選擇最佳連接的網關並下行轉發消息
    * 後端還包括管理、授權和為客戶提供服務，通過拉動模式提供API將Sigfox雲功能整合到第三方平台中。
    * 為確保「即發即棄」通信模型下的數據完整性，多個網關可能接收來自某個節點的傳輸，重複消息在後端被刪除，增加了冗餘。